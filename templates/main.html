{% extends 'base.html' %}

{% block title %}ğŸ§³ì—¬í–‰ ë‹¤ì›€ğŸ§³{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2>ğŸ§³ ì—¬í–‰ ë‹¤ì›€ ë©”ì¸ í˜ì´ì§€</h2>
    <hr>

    <!-- ê²€ìƒ‰ì°½ -->
    <div class="mb-4">
        <form method="get" action="{% url 'places:search_results' %}">
            <input type="text" name="query" class="form-control" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
            <button type="submit" class="btn btn-primary mt-2">ê²€ìƒ‰</button>
        </form>
    </div>

    <!-- íƒ­ ë²„íŠ¼ë“¤ -->
    <ul class="nav nav-tabs" id="mainTabs">
        <li class="nav-item">
            <a class="nav-link active" data-tab="festivals" href="#">ì§€ì—­ ì¶•ì œ ì •ë³´</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-tab="travel_destinations" href="#">êµ­ë‚´ ì—¬í–‰ì§€ ì •ë³´</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-tab="others_posts" href="#">ë‚¨ì˜ ì—¬í–‰ì¼ì§€</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-tab="friends_posts" href="#">ì¹œêµ¬ì˜ ì—¬í–‰ì¼ì§€</a>
        </li>
    </ul>

    <!-- íƒ­ ì½˜í…ì¸ ë¥¼ í‘œì‹œí•  ì˜ì—­ -->
    <div id="tabContent" class="mt-4"></div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const tabs = document.querySelectorAll('#mainTabs .nav-link');
    const tabContent = document.getElementById('tabContent');

    function loadTabContent(tab) {
        fetch(`/places/load_tab/${tab}/`)
            .then(response => response.text())
            .then(data => {
                tabContent.innerHTML = data;
            })
            .catch(error => console.error('Error loading tab content:', error));
    }

    // ì²˜ìŒ ë¡œë”© ì‹œ ì²« ë²ˆì§¸ íƒ­ ì½˜í…ì¸  ë¡œë“œ
    loadTabContent('festivals');

    // íƒ­ í´ë¦­ ì‹œ AJAXë¡œ ì½˜í…ì¸  ë¡œë“œ
    tabs.forEach(tab => {
        tab.addEventListener('click', function(event) {
            event.preventDefault();
            tabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            const tabName = this.getAttribute('data-tab');
            loadTabContent(tabName);
        });
    });
});
</script>
{% endblock %}
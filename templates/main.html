{% extends 'base.html' %}
{% load static %}

{% block title %}ğŸ§³ì—¬í–‰ ë‹¤ì›€ğŸ§³{% endblock %}

{% block content %}
<div class="container mt-5">
    <!-- ê²€ìƒ‰ì°½ -->
    <div class="mb-4">
        <form method="get" action="{% url 'places:search_results' %}" class="m-search">
            <input type="text" name="query" class="form-control" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required>
            <button type="submit" class="btn btn-primary mt-2"><img src="{% static 'images/ê²€ìƒ‰ë²„íŠ¼.png' %}" alt="ê²€ìƒ‰ ë²„íŠ¼" id="searchButton"></button>
        </form>
        
    </div>

    <!-- íƒ­ ë²„íŠ¼ë“¤ -->
    <ul class="nav nav-tabs" id="mainTabs">
        <li class="nav-item">
            <a class="nav-link active" data-tab="festivals" href="#">ì§€ì—­ ì¶•ì œ ì •ë³´</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-tab="travel_destinations" href="#">êµ­ë‚´ ì—¬í–‰ì§€ ì •ë³´</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-tab="others_posts" href="#">ë‚¨ì˜ ì—¬í–‰ì¼ì§€</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" data-tab="friends_posts" href="#">ì¹œêµ¬ì˜ ì—¬í–‰ì¼ì§€</a>
        </li>
    </ul>

    <!-- íƒ­ ì½˜í…ì¸ ë¥¼ í‘œì‹œí•  ì˜ì—­ -->
    <div id="tabContent" class="mt-4">
        <div class="carousel-content"></div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const tabs = document.querySelectorAll('#mainTabs .nav-link');
    const tabContentWrapper = document.querySelector('.carousel-wrapper'); // Wrapper
    const tabContent = document.querySelector('.carousel-content'); // Slider content

    function loadTabContent(tab) {
        fetch(`/places/load_tab/${tab}/`)
            .then(response => response.text())
            .then(data => {
                // ì›ë³¸ ì½˜í…ì¸  ì¶”ê°€
                tabContent.innerHTML = data;

                // ì½˜í…ì¸  ë³µì œ
                const clonedContent = tabContent.cloneNode(true);
                tabContentWrapper.appendChild(clonedContent); // ë³µì œëœ ì½˜í…ì¸  ì¶”ê°€
            })
            .catch(error => console.error('Error loading tab content:', error));
    }

    // ì²˜ìŒ ë¡œë”© ì‹œ ì²« ë²ˆì§¸ íƒ­ ì½˜í…ì¸  ë¡œë“œ
    loadTabContent('festivals');

    // íƒ­ í´ë¦­ ì‹œ AJAXë¡œ ì½˜í…ì¸  ë¡œë“œ
    tabs.forEach(tab => {
        tab.addEventListener('click', function (event) {
            event.preventDefault();
            tabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            const tabName = this.getAttribute('data-tab');
            loadTabContent(tabName);
        });
    });
});

</script>

<style>
    .mt-5 {
    margin-top: 7rem !important;
    }
    .h-m-header-title {
    font-size: 28px;
    font-weight: bold;
    color: #508344;
    display: flex;
    align-items: center;
    justify-content: center;
}
.m-search {
    position: relative;
        margin-top: 25px; /* ë¡œê³ ì™€ì˜ ê°„ê²©ì„ ë§ì¶”ê¸° ìœ„í•´ margin-topì„ ì ë‹¹íˆ ì„¤ì • */
        display: flex;
        align-items: center;
        width: 70%;
        max-width: 600px;
        margin:auto;
        justify-content: center;
    }

    .mt-5 {
        margin-top: unset;
        margin-bottom: 10rem;
    }
    /* ê²€ìƒ‰ì°½ */
    .btn-primary {
    --bs-btn-bg: unset; 
    --bs-btn-border-color: unset;
    }
form input[type="text"] {
    width: 100%;
        padding: 10px 40px 10px 10px;
        font-size: 16px;
        border: 2px solid #508344;
        border-radius: 30px;
        box-sizing: border-box;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
#searchButton {
    position: absolute;
    top: 10px;
    right: 31px;
    width: 30px;
    height: 30px;
    cursor: pointer;
    }

form button {
    background-color: #3b873e;
    border: none;
    color: white;
    padding: 10px 20px;
    border-radius: 5px;
    font-size: 1rem;
    cursor: pointer;
}

form button:hover {
    background-color: #2f6f31; /* ì–´ë‘ìš´ ì´ˆë¡ìƒ‰ */
}


/* íƒ­ ë²„íŠ¼ */
.nav-tabs {
    justify-content: center; /* ì¤‘ì•™ ì •ë ¬ */
    border-bottom: none; /* ê¸°ë³¸ íƒ­ ê²½ê³„ì„  ì œê±° */
    margin-bottom: 20px;
}

.nav-tabs .nav-link {
    color: #3b873e;
    background-color: #f8f8f8;
    border: 1px solid #3b873e;
    border-radius: 5px;
    padding: 10px 15px;
    margin: 0 5px;
    font-size: 1rem;
    text-align: center;
}

.nav-tabs .nav-link.active {
    color: white;
    background-color: #3b873e;
    border: 1px solid #3b873e;
}

/* ì½˜í…ì¸  ì˜ì—­ */
#tabContent {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap; /* ë°˜ì‘í˜• ë””ìì¸ */
    gap: 20px; /* ì¹´ë“œ ê°„ê²© */
}

/* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
.card {
    border: 1px solid #3b873e;
    border-radius: 10px;
    background-color: white;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    width: calc(25% - 20px); /* 4ê°œì˜ ì¹´ë“œ ë°°ì¹˜ */
    text-align: center;
    padding: 15px;
}

.card img {
    width: 100%;
    border-radius: 10px;
}

.card-title {
    color: #3b873e;
    font-weight: bold;
    margin-top: 10px;
}

.carousel-wrapper {
    overflow: hidden; /* ë„˜ì¹˜ëŠ” ë¶€ë¶„ ìˆ¨ê¸°ê¸° */
    width: 100%; /* ì»¨í…Œì´ë„ˆ ì „ì²´ ë„ˆë¹„ */
    position: relative; /* ìœ„ì¹˜ ì„¤ì • */
    height: 300px; /* ìŠ¬ë¼ì´ë” ë†’ì´ */
}

.carousel-content {
    display: flex; /* ê°€ë¡œë¡œ ì •ë ¬ */
    flex-wrap: nowrap; /* ì¤„ë°”ê¿ˆ ë°©ì§€ */
    gap: 10px; /* ì¹´ë“œ ê°„ ê°„ê²© */
    animation: slide 20s linear infinite; /* ìŠ¬ë¼ì´ë” ì• ë‹ˆë©”ì´ì…˜, ì†ë„ ëŠë¦¬ê²Œ */
}

.card {
    flex: 0 0 auto; /* ì¹´ë“œ í¬ê¸° ê³ ì • */
    width: 300px; /* ì¹´ë“œ ë„ˆë¹„ */
    height: 100%; /* ì¹´ë“œ ë†’ì´ */
}

@keyframes slide {
    from {
        transform: translateX(0); /* ì‹œì‘ ìœ„ì¹˜ */
    }
    to {
        transform: translateX(-50%); /* ìŠ¬ë¼ì´ë”ê°€ ì ˆë°˜ê¹Œì§€ ì´ë™ */
    }
}
</style>
{% endblock %}
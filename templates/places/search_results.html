{% extends 'base.html' %}
{% load static %}

{% block title %}ê²€ìƒ‰ ê²°ê³¼{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2>ê²€ìƒ‰ ê²°ê³¼: "{{ query }}"</h2>
    <hr>

    <!-- ì¶•ì œ ê²€ìƒ‰ ê²°ê³¼ -->
    {% if festivals %}
        <h3>ğŸ“… ì¶•ì œ</h3>
        <div class="row mt-4">
            {% for festival in festivals %}
            <div class="col-md-4 mb-4">
                <div class="card shadow-sm">
                    {% if festival.image %}
                        <img src="{{ festival.image.url }}" class="card-img-top" alt="{{ festival.name }}" style="height: 200px; object-fit: cover;">
                    {% endif %}
                    <div class="card-body">
                        <h5>{{ festival.name }}</h5>
                        <p>{{ festival.description|truncatewords:20 }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <hr>
    {% endif %}

    <!-- ì—¬í–‰ì§€ ê²€ìƒ‰ ê²°ê³¼ -->
    {% if destinations %}
        <h3>ğŸ—ºï¸ ì—¬í–‰ì§€</h3>
        <div class="row mt-4">
            {% for destination in destinations %}
            <div class="col-md-4 mb-4">
                <div class="card shadow-sm">
                    {% if destination.image %}
                        <img src="{{ destination.image.url }}" class="card-img-top" alt="{{ destination.name }}" style="height: 200px; object-fit: cover;">
                    {% endif %}
                    <div class="card-body">
                        <h5>{{ destination.name }}</h5>
                        <p>{{ destination.description|truncatewords:20 }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <hr>
    {% endif %}

    <!-- ë‚¨ì˜ ì—¬í–‰ì¼ê¸° ê²€ìƒ‰ ê²°ê³¼ -->
    {% if others_posts %}
        <h3>ğŸ“– ë‚¨ì˜ ì—¬í–‰ì¼ê¸°</h3>
        {% for post in others_posts %}
        <div class="post-item">
            <h4>{{ post.title }}</h4>
            <p>{{ post.content|truncatewords:30 }}</p>
            <p>ì‘ì„±ì: {{ post.author.username }} | ì‘ì„±ì¼: {{ post.created_at|date:"Y-m-d H:i" }}</p>
            <hr>
        </div>
        {% endfor %}
    {% endif %}

    <!-- ì¹œêµ¬ì˜ ì—¬í–‰ì¼ê¸° ê²€ìƒ‰ ê²°ê³¼ -->
    {% if friends_posts %}
        <h3>ğŸ‘¥ ì¹œêµ¬ì˜ ì—¬í–‰ì¼ê¸°</h3>
        {% for post in friends_posts %}
        <div class="post-item">
            <h4>{{ post.title }}</h4>
            <p>{{ post.content|truncatewords:30 }}</p>
            <p>ì‘ì„±ì: {{ post.author.username }} | ì‘ì„±ì¼: {{ post.created_at|date:"Y-m-d H:i" }}</p>
            <hr>
        </div>
        {% endfor %}
    {% endif %}
</div>
{% endblock %}
